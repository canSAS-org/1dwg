<?xml version="1.0" encoding="UTF-8"?>
<?oxygen RNGSchema="http://www.oasis-open.org/docbook/xml/5.0/rng/docbook.rng" type="xml"?>
<!-- 
########### SVN repository information ###################
# $Date$
# $Author$
# $Revision$
# $HeadURL$
# $Id$
########### SVN repository information ###################
-->
<chapter xml:id="wiki-chapter" xmlns="http://docbook.org/ns/docbook" version="5.0"
    xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>Overview</title>
    <!-- from: http://www.smallangles.net/wgwiki/index.php/cansas1d_documentation -->
    <section xml:id="cansas1d_documentation-Objective">
        <title>Objective</title>
        <para>One of the first aims of the <emphasis role="bold">canSAS</emphasis>
            <indexterm><primary>canSAS</primary></indexterm>
            (Collective Action for Nomadic Small-Angle Scatterers) 
            forum of users, software developers, and facility staff was to discuss
            better sharing of SAS data analysis software. The <link
                xlink:href="http://www.smallangles.net/canSAS">canSAS</link><footnote><para>
                <link xlink:href="http://www.smallangles.net/canSAS"
                    ><literal>http://www.smallangles.net/canSAS</literal></link></para></footnote>
            identified that a significant need within the SAS
            community can be satisfied by a robust, self-describing, text-based, standard format to
            communicate reduced one-dimensional small-angle scattering data, <literal>I(Q)</literal>, between users
            of our facilities. Our goal has been to define such a format that leaves the data file
            instantly human-readable, editable in the simplest of editors, and importable by simple
            text import filters in programs that need not recognise advanced structure in the file
            nor require advanced programming interfaces. The file should contain both the primary
            data of <literal>I(Q)</literal> and also any other descriptive information (metadata) about the sample,
            measurement, instrument, processing, or analysis steps. </para>
        <para>The cansas1d/1.0
            <indexterm><primary>cansas1d/1.0 standard</primary></indexterm> 
            standard meets the objectives for a 1D standard, incorporating
            metadata about the measurement, parameters and results of processing or analysis steps.
            Even multiple measurements (related or unrelated) may be included within a single XML
            file. </para>
        <section xml:id="cansas1d_documentation_Objective-Status">
            <title>Status</title>
            <para>Version 1.0 was tagged from the subversion repository on 2009-05-12 as no changes
                were committed since January 2009. Use this command to checkout the tagged release.
                <example>
                    <title>Checkout tagged release from subversion repository.</title>
                    <programlisting>svn checkout http://svn.smallangles.net/svn/canSAS/1dwg/tags/v1.0 cansas1dwg-1.0</programlisting>
                </example>
            </para>
        </section>
    </section>
    <section xml:id="cansas1d_documentation-XMLLayout">
        <title>General Layout of the XML Data</title>
        <para>The canSAS 1-D standard for reduced 1-D SAS data is implemented using XML files. A
            single file can contain SAS data from a single experiment or multiple experiments. All
            types of relevant data (<literal>I(Q)</literal>, metadata) 
            are described for each experiment. More
            details are provided below.</para>
        <section xml:id="cansas1d_documentation-XMLLayout-Overview">
            <title>Overview</title>
            <para>The basic elements of the cansas1d/1.0 standard are shown in the following table.
                After an XML header, the root element of the file is 
                <link xlink:href="#cansas1d_documentation-element-SASroot"
                    ><literal>SASroot</literal></link>
                <indexterm><primary>element</primary><secondary>SASroot</secondary></indexterm>
                which contains one or more
                <link xlink:href="#cansas1d_documentation-element-SASentry"
                    ><literal>SASentry</literal></link>
                <indexterm><primary>element</primary><secondary>SASentry</secondary></indexterm>
                elements, each of which
                describes a single experiment (data set, time-slice, step in a series, new sample,
                etc.). Details of the <literal>SASentry</literal> element are also shown in the
                next figure. 
                See the section titled <link
                    xlink:href="#xml-data-file"
                    >Example XML Data Files</link>
                for examples of cansas1d/1.0 XML data file. 
                Examples, Case Studies, and other background information
                are below. More discussion can be found on the
                <link
                    xlink:href="http://www.smallangles.net/wgwiki/index.php/1D_Data_Formats_Working_Group"
                    >canSAS 1D Data Formats Working Group</link><footnote>
                    <para>
                        <link xlink:href="http://www.smallangles.net/wgwiki/index.php/1D_Data_Formats_Working_Group"
                            ><literal>http://www.smallangles.net/wgwiki/index.php/1D_Data_Formats_Working_Group</literal></link>
                    </para>
                </footnote>
                page and its
                <link
                    xlink:href="http://www.smallangles.net/wgwiki/index.php/Talk:1D_Data_Formats_Working_Group"
                    >discussion</link><footnote>
                    <para>
                        <link xlink:href="http://www.smallangles.net/wgwiki/index.php/Talk:1D_Data_Formats_Working_Group"
                            ><literal>http://www.smallangles.net/wgwiki/index.php/Talk:1D_Data_Formats_Working_Group</literal></link>
                    </para>
                </footnote>
                page.  A 
                <link
                    xlink:href="#cansas1d_documentation-Documentation-Definitions"
                    >glossary</link>
                <indexterm><primary>glossary</primary></indexterm>
                defining the details about each specific field (XPath string, XML elements and attributes) is provided.
                </para>
            <figure>
                <title>block diagram of minimum elements required for cansas1d/1.0 standard</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="../../graphics/10-minimum.png" scalefit="1" width="200pt"/>
                    </imageobject>
                </mediaobject>
            </figure>
            <itemizedlist>
                <listitem><para> 
                        <link xlink:href="#cansas1d_documentation-element-SASroot"
                            ><literal>SASroot</literal></link>:
                        the root element of the file (after the XML header) 
                    </para></listitem>
                <listitem>
                    <para> 
                        <link xlink:href="#cansas1d_documentation-element-SASentry"
                            ><literal>SASentry</literal></link>:
                        describes a single experiment (data set, time-slice, step in a
                        series, new sample, etc.) 
                    </para>
                </listitem>
            </itemizedlist>
            <example>
                <title>Required header for cansas1d/1.0 XML files</title>
                <indexterm significance="preferred">
                    <primary>XML header</primary>
                </indexterm>
                <programlisting>&lt;?xml version="1.0"?>
&lt;SASroot version="1.0"
   xmlns="cansas1d/1.0"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="cansas1d/1.0 
   http://svn.smallangles.net/svn/canSAS/1dwg/trunk/cansas1d.xsd"></programlisting>
            </example>
            <para>
                <table frame="all">
                    <title>Basic elements of the canSAS 1-D standard</title>
                    <tgroup cols="2">
                        <colspec colname="c1" colnum="1" colwidth="2*"/>
                        <colspec colname="c2" colnum="2" colwidth="6*"/>
                        <thead>
                            <row>
                                <entry><?dblatex bgcolor="[gray]{0.8}"?>Element</entry>
                                <entry><?dblatex bgcolor="[gray]{0.8}"?>Description</entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>XML Header</entry>
                                <entry>descriptive info required at the start of every XML
                                    file</entry>
                            </row>
                            <row>
                                <entry>
                                    <link xlink:href="#cansas1d_documentation-element-SASroot"
                                        ><literal>SASroot</literal></link>
                                </entry>
                                <entry>root element of XML file</entry>
                            </row>
                            <row>
                                <entry>
                                    <link xlink:href="#cansas1d_documentation-element-SASentry"
                                        ><literal>&#160;SASentry</literal></link>
                                </entry>
                                <entry>data set, time-slice, step in a series, new sample,
                                    etc.</entry>
                            </row>
                            <row>
                                <entry>
                                    <literal>&#160;&#160;Title</literal>
                                </entry>
                                <entry>for this particular <literal>SASentry</literal></entry>
                            </row>
                            <row>
                                <entry>
                                    <literal>&#160;&#160;Run</literal>
                                </entry>
                                <entry>run number or ID number of experiment</entry>
                            </row>
                            <row>
                                <entry>
                                    <link xlink:href="#cansas1d_documentation-element-any"
                                        ><literal>&#160;&#160;{any}</literal></link>
                                </entry>
                                <entry>any <literal>cansas1d/1.0</literal> element can be used at this
                                    point</entry>
                            </row>
                            <row>
                                <entry>
                                    <link xlink:href="#cansas1d_documentation-element-SASdata"
                                        ><literal>&#160;&#160;SASdata</literal></link>
                                </entry>
                                <entry>this is where the reduced 1-D SAS data is stored</entry>
                            </row>
                            <row>
                                <entry>
                                    <literal>&#160;&#160;&#160;Idata</literal>
                                </entry>
                                <entry>a single data point in the dataset</entry>
                            </row>
                            <row>
                                <entry>
                                    <link xlink:href="#cansas1d_documentation-element-any"
                                        ><literal>&#160;&#160;{any}</literal></link>
                                </entry>
                                <entry>any cansas1d/1.0 element can be used at this
                                    point</entry>
                            </row>
                            <row>
                                <entry>
                                    <link xlink:href="#cansas1d_documentation-element-SASsample"
                                        ><literal>&#160;&#160;SASsample</literal></link>
                                </entry>
                                <entry>description of the sample</entry>
                            </row>
                            <row>
                                <entry>
                                    <link xlink:href="#cansas1d_documentation-element-SASinstrument"
                                        ><literal>&#160;&#160;SASinstrument</literal></link>
                                </entry>
                                <entry>description of the instrument</entry>
                            </row>
                            <row>
                                <entry>
                                    <link xlink:href="#cansas1d_documentation-element-SASsource"
                                        ><literal>&#160;&#160;&#160;SASsource</literal></link>
                                </entry>
                                <entry>description of the source</entry>
                            </row>
                            <row>
                                <entry>
                                    <link xlink:href="#cansas1d_documentation-element-SAScollimation"
                                        ><literal>&#160;&#160;&#160;SAScollimation</literal></link>
                                </entry>
                                <entry>description of the collimation</entry>
                            </row>
                            <row>
                                <entry>
                                    <link xlink:href="#cansas1d_documentation-element-SASdetector"
                                        ><literal>&#160;&#160;&#160;SASdetector</literal></link>
                                </entry>
                                <entry>description of the detector</entry>
                            </row>
                            <row>
                                <entry>
                                    <link xlink:href="#cansas1d_documentation-element-SASprocess"
                                        ><literal>&#160;&#160;SASprocess</literal></link>
                                </entry>
                                <entry>for each processing or analysis step</entry>
                            </row>
                            <row>
                                <entry>
                                    <link xlink:href="#cansas1d_documentation-element-SASnote"
                                        ><literal>&#160;&#160;SASnote</literal></link>
                                </entry>
                                <entry>anything at all</entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
            </para>
            </section>
    </section>
    <section xml:id="cansas1d_documentation-rules">
        <title>Rules</title>
        <orderedlist>
            <listitem>
                <para> cansas1d/1.0 XML data files will adhere to the standard if they can
                    successfully
                    <link xlink:href="#cansas1d_documentation-schema_validation">validate</link>
                    <indexterm>
                        <primary>validation</primary>
                        <secondary>against XML Schema</secondary>
                    </indexterm>
                    against the established XML Schema
                    (<link 
                        xlink:href="http://svn.smallangles.net/trac/canSAS/browser/1dwg/trunk/cansas1d.xsd"
                        ><literal>canSAS1d.xsd</literal></link>).</para>
            </listitem>
            <listitem>
                <para>
                    <inlineequation>
                        <mathphrase>
                            <alt>
                                Q=(4 \pi / \lambda) \sin(\theta)
                            </alt>
                        </mathphrase>
                    </inlineequation>
                </para>
                <para>
                    <indexterm>
                        <primary>geometry</primary>
                        <secondary>Q</secondary>
                    </indexterm>
                    where 
                    <inlineequation><mathphrase><alt>\lambda</alt></mathphrase></inlineequation> 
                    is the wavelength of the radiation</para>
                <para>and  
                    <inlineequation><mathphrase><alt>2\theta</alt></mathphrase></inlineequation>
                    is the angle through which the detected radiation has been
                    scattered.</para>
                <figure>
                    <title>definition of Q geometry for small-angle scattering</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="../../graphics/Q-geometry.jpg" scalefit="1"
                                width="200pt"/></imageobject>
                    </mediaobject>
                </figure>
            </listitem>
            <listitem>
                <para>
                    units
                    <indexterm significance="preferred">
                        <primary>unit</primary>
                    </indexterm>
                    <indexterm>
                        <primary>units</primary>
                        <see>unit</see>
                    </indexterm>
                    to be given in standard SI abbreviations (eg, m, cm, mm, nm, K)
                    with the following exceptions: </para>
                <orderedlist numeration="loweralpha">
                    <listitem>
                        <para>um=micrometres</para>
                    </listitem>
                    <listitem>
                        <para>C=celsius</para>
                    </listitem>
                    <listitem>
                        <para>A=Angstroms</para>
                    </listitem>
                    <listitem>
                        <para>percent=%.</para>
                    </listitem>
                    <listitem>
                        <para>fraction</para>
                    </listitem>
                    <listitem>
                        <para>a.u.=arbitrary units</para>
                    </listitem>
                    <listitem>
                        <para>none=no units are relevant (such as dimensionless)</para>
                    </listitem>
                </orderedlist>
            </listitem>
            <listitem>
                <para> where reciprocal units need to be quoted the format shall be
                    "1/abbreviation"</para>
            </listitem>
            <listitem>
                <para> when raised to a power, use similar to "A^3" or "1/m^4" (and not "A3" or
                    "A**3" or "m-4")</para>
            </listitem>
            <listitem>
                <para> 
                    axes:
                    <indexterm>
                        <primary>geometry</primary>
                        <secondary>translation</secondary>
                    </indexterm>
                </para>
                <orderedlist numeration="loweralpha">
                    <listitem>
                        <para>z is along the flight path (positive value in the direction of the
                            detector)</para>
                    </listitem>
                    <listitem>
                        <para>x is orthogonal to z in the horizontal plane (positive values
                            increase to the right when viewed towards the incoming
                            radiation)</para>
                    </listitem>
                    <listitem>
                        <para>y is orthogonal to z and x in the vertical plane (positive values
                            increase upwards)</para>
                    </listitem>
                    <listitem>
                        <figure>
                            <title>definition of translation and orientation geometry as viewed
                                from the detector towards the source</title>
                            <para>
                                <indexterm>
                                    <primary>geometry</primary>
                                    <secondary>rotation</secondary>
                                </indexterm>
                                <informaltable>
                                    <!--<title/>-->
                                    <tgroup cols="2">
                                        <tbody>
                                            <row>
                                                <entry>
                                                    <mediaobject>
                                                        <imageobject>
                                                            <imagedata
                                                                fileref="../../graphics/translation-orientation-geometry.jpg"
                                                                width="200pt" scalefit="1"/>
                                                        </imageobject>
                                                        <caption>
                                                            <para>as viewed from source</para>
                                                        </caption>
                                                    </mediaobject>
                                                </entry>
                                                <entry>
                                                    <mediaobject>
                                                        <imageobject>
                                                            <imagedata
                                                                fileref="../../graphics/translation-orientation-geometry-2.jpg"
                                                                width="200pt" scalefit="1"/>
                                                        </imageobject>
                                                        <caption>
                                                            <para>as viewed from detector</para>
                                                        </caption>
                                                    </mediaobject>
                                                </entry>
                                            </row>
                                        </tbody>
                                    </tgroup>
                                </informaltable>
                            </para>
                        </figure>
                    </listitem>
                </orderedlist>
            </listitem>
            <listitem>
                <para>orientation (angles) describes one-axis rotations (rotations about
                    multiple axes require more information): </para>
                <orderedlist numeration="loweralpha">
                    <listitem>
                        <para>roll is about z</para>
                    </listitem>
                    <listitem>
                        <para>pitch is about x</para>
                    </listitem>
                    <listitem>
                        <para>yaw is about y</para>
                    </listitem>
                </orderedlist>
            </listitem>
            <listitem>
                <para> Unicode characters MUST NOT be used</para>
                <!--<note><para>Perhaps this could be relaxed in v1.1?</para></note>-->
            </listitem>
            <listitem>
                <para> Binary data is not supported</para>
            </listitem>
        </orderedlist>
        <para>
        </para>
    </section>
    <section xml:id="cansas1d_documentation-geometry_compatibility">
        <title>Compatibility of Geometry Definitions</title>
        <para> Note: translation and orientation geometry used by canSAS are consistent with: </para>
        <itemizedlist>
            <listitem>
                <para>Cartesian: <link xlink:href="http://en.wikipedia.org/wiki/Cartesian_coordinate_system"
                    ><literal>http://en.wikipedia.org/wiki/Cartesian_coordinate_system</literal></link></para>
            </listitem>
            <listitem>
                <para>Right-hand rule: <link xlink:href="http://en.wikipedia.org/wiki/Right-hand_rule"
                    ><literal>http://en.wikipedia.org/wiki/Right-hand_rule</literal></link></para>
            </listitem>
            <listitem>
                <para>NeXus: <link xlink:href="http://www.nexusformat.org/Coordinate_Systems"
                    ><literal>http://www.nexusformat.org/Coordinate_Systems</literal></link></para>
            </listitem>
            <listitem>
                <para><literal>McStas</literal>: 
                    <link xlink:href="http://mcstas.risoe.dk/documentation/tutorial/node6.html"
                        ><literal>http://mcstas.risoe.dk/documentation/tutorial/node6.html</literal
                        ></link></para>
            </listitem>
                <!-- PRJ, 2009-10-08: no longer available, this was a robotics book
                    Now, that work is (from http://www.springer.com/engineering/book/978-0-387-32475-3)
                    Theory of Applied Robotics
                    Kinematics, Dynamics, and Control
                    Jazar, Reza N.
                    2007, XXI, 695 p. 200 illus., Hardcover
                    ISBN: 978-0-387-32475-3
                    <listitem>
                    <para><link xlink:href="http://webhost5.nts.jhu.edu/reza/book/kinematics/kinematics.htm"
                        ><literal>http://webhost5.nts.jhu.edu/reza/book/kinematics/kinematics.htm</literal></link></para>
                </listitem>-->
        </itemizedlist>
        <para>The translation and orientation geometry definitions used here are different than
            those used by <link xlink:href="http://www.nanotech.wisc.edu/shadow"
                ><literal>SHADOW</literal></link><footnote><para>
                <link xlink:href="http://www.nanotech.wisc.edu/shadow"
                    ><literal>http://www.nanotech.wisc.edu/shadow</literal></link></para></footnote>
            where the <emphasis role="italic">y</emphasis> and <emphasis role="italic"
                >z</emphasis> axes are swapped and the direction of <emphasis role="italic"
                    >x</emphasis> is changed.</para>
    </section>
    <section xml:id="cansas1d_documentation-converting_into_XML">
        <title>Converting data into the XML format</title>
        <para>The 
            <link xlink:href="http://www.smallangles.net/canSAS/xmlWriter/"
                ><emphasis role="italic">canSAS/xmlWriter</emphasis></link><footnote>
                <para><link xlink:href="http://www.smallangles.net/canSAS/xmlWriter/"
                    ><literal>http://www.smallangles.net/canSAS/xmlWriter/</literal></link></para>
            </footnote>
            <indexterm><primary><literal>xmlWriter</literal></primary></indexterm>
            is a WWW form
            to translate three-column ASCII text data into the cansas1d/1.0 XML
            format. This form will help you in creating an XML file with all the required
            elements in the correct places. The form requests the SAS data of Q, I, and Idev
            (defined elsewhere on this page) and some basic metadata (title, run, sample info,
            ...). </para>
        <para>Press the <code>Submit</code> button and you will receive a nicely
            formatted WWW page with the SAS data. If you then choose <emphasis>View page source</emphasis>
            (from one of your browser menus), you will see the raw XML of the cansas1d/1.0 XML format
            and you can copy/paste this into an XML file. </para>
        <para>The SAS data that you paste into the form box is likely to be copied directly from
            a 3-column ASCII file from a text editor. Line breaks are OK, they will be treated
            as white-space as will tabs and commas. Do not be concerned that the data looks
            awful in the form entry box, just check the result to see that it comes out
            OK.</para>
    </section>
    <section xml:id="cansas1d_documentation-Documentation-Definitions">
        <title>Documentation and Definitions</title>
        <section xml:id="cansas1d_documentation-XML_Schema">
            <title>XML Schema</title>
            <para> The 
                <link xlink:href="http://svn.smallangles.net/trac/canSAS/browser/1dwg/trunk/cansas1d.xsd"
                    ><literal>cansas1d.xsd</literal></link>
                <link xlink:href="http://www.w3schools.com/xsd"
                    >XML Schema</link><footnote><para>
                    <link xlink:href="http://www.w3schools.com/xsd"
                        ><literal>http://www.w3schools.com/xsd</literal></link></para></footnote>
                <indexterm><primary>XML Schema</primary></indexterm>
                defines the rules for the XML file format<footnote>
                    <para>
                        TRAC:
                        <link xlink:href="http://svn.smallangles.net/trac/canSAS/browser/1dwg/trunk/cansas1d.xsd"
                            ><literal>http://svn.smallangles.net/trac/canSAS/browser/1dwg/trunk/cansas1d.xsd</literal></link>
                    </para>
                </footnote><footnote>
                    <para>
                        SVN:
                        <link xlink:href="http://svn.smallangles.net/svn/canSAS/1dwg/trunk/cansas1d.xsd"
                            ><literal>http://svn.smallangles.net/svn/canSAS/1dwg/trunk/cansas1d.xsd</literal></link>
                    </para>
                </footnote>
                and is used to
                validate any XML file for adherence to the format. </para>
        </section>
        <section xml:id="cansas1d_documentation-XML_Stylesheets">
            <title>XML Stylesheets</title>
            <para>
                XML stylesheets (also known as XSLT)<footnote>
                    <para>
                        <link xlink:href="http://www.w3schools.com/xsl/"
                            ><literal>http://www.w3schools.com/xsl/</literal></link></para>
                </footnote>
                <indexterm>
                    <primary>XML Stylesheet</primary>
                </indexterm>
                can be used to extract metadata or to convert into another file format. The
                default canSAS stylesheet <literal>cansasxml-html.xsl</literal><footnote>
                    <para>
                        <link xlink:href="http://svn.smallangles.net/svn/canSAS/1dwg/trunk/cansasxml-html.xsl"
                            ><literal>http://svn.smallangles.net/svn/canSAS/1dwg/trunk/cansasxml-html.xsl</literal></link></para>
                </footnote>
                should be copied into each folder with canSAS XML data
                file(s). It can be used to display the data in a supporting WWW browser
                (such as Firefox or Internet Explorer) or to import into Microsoft Excel
                (with the added XML support in Excel). (See the excellent write-up by Steve
                King, ISIS,<footnote>
                    <para>
                        <link xlink:href="http://www.isis.rl.ac.uk/archive/LargeScale/LOQ/xml/cansas_xml_format.pdf"
                            ><literal>http://www.isis.rl.ac.uk/archive/LargeScale/LOQ/xml/cansas_xml_format.pdf</literal></link>
                    </para>
                </footnote>
                for an example.) By default, MS Windows binds <literal>*.xml</literal> files to start
                Internet Explorer. Double-clicking on a canSAS XML data file with the
                <literal>cansasxml-html.xsl</literal> (see above)
                stylesheet in the same directory will produce a
                WWW page with the SAS data and selected metadata.</para>
        </section>
        <section xml:id="cansas1d_documentation-programming_suggestions">
            <title>Suggestions for support software that write cansas1d/1.0 XML data files</title>
            <para>
                Some common best practices have been identified in the list below.
                <indexterm><primary>file</primary><secondary>Writing cansas1d/1.0 files</secondary></indexterm>
                <indexterm><primary>best practices</primary></indexterm>
            </para>
            <itemizedlist>
                <listitem>
                    <para>be sure to update to the latest SVN repository revision (command:
                        <code>svn update</code>) </para>
                </listitem>
                <listitem>
                    <para>check the output directory to see if it contains the default XSLT
                        file.</para>
                </listitem>
                <listitem>
                    <para>copy the latest XSLT file to the output directory if
                        either:</para>
                    <itemizedlist>
                        <listitem>
                            <para>the output directory contains an older revision</para>
                        </listitem>
                        <listitem>
                            <para>the output directory does not have the default XSLT
                                file</para>
                        </listitem>
                    </itemizedlist>
                </listitem>
                <listitem>
                    <para>The most recent XSLT file can be identified by examining the file
                        for the <literal>$ Revision: </literal> string such as in the next example. 
                        <informalexample>
                            <programlisting># &#36;Revision: 111 $</programlisting>
                        </informalexample>
                    </para>
                </listitem>
            </itemizedlist>
        </section>
        <section xml:id="cansas1d_documentation-examples">
            <title>Examples and Case Studies</title>
            <itemizedlist>
                <listitem>
                    <para>
                        Basic example:<footnote><para>
                            <link xlink:href="http://svn.smallangles.net/trac/canSAS/browser/1dwg/trunk/cansas1d.xml"
                                ><literal
                                    >http://svn.smallangles.net/trac/canSAS/browser/1dwg/trunk/cansas1d.xml</literal
                                ></link></para></footnote>
                        <indexterm>
                            <primary>XML file</primary>
                            <secondary>cansas1d.xml</secondary>
                        </indexterm>
                        Note that, for clarity, only one row of data is
                        shown. This is probably a very good example to use as a starting point for
                        creating XML files with a text editor.</para>
                </listitem>
                <listitem>
                    <para>
                        Bimodal test data:<footnote><para>
                            <link xlink:href="http://svn.smallangles.net/trac/canSAS/browser/1dwg/trunk/bimodal-test1.xml"
                                ><literal
                                    >http://svn.smallangles.net/trac/canSAS/browser/1dwg/trunk/bimodal-test1.xml</literal
                                ></link></para></footnote>
                        <indexterm>
                            <primary>XML file</primary>
                            <secondary>bimodal-test1.xml</secondary>
                        </indexterm>
                        <indexterm>
                            <primary>case study</primary>
                            <secondary>bimodal test data</secondary>
                        </indexterm>
                        Simulated SAS data (with added noise) calculated from model bimodal size 
                        distribution to test size distribution analysis routines.</para>
                </listitem>
                <listitem>
                    <para>
                        Glassy Carbon Round Robin:<footnote>
                            <para>
                            <link xlink:href="http://www.smallangles.net/wgwiki/index.php/Glassy_Carbon_Round_Robin"
                                ><literal>http://www.smallangles.net/wgwiki/index.php/Glassy_Carbon_Round_Robin</literal
                                ></link></para>
                        </footnote>
                        <indexterm>
                            <primary>case study</primary>
                            <secondary>glassy carbon round robin</secondary>
                        </indexterm>
                        Samples of a commercial glassy carbon
                        measured at several facilities worldwide.</para>
                </listitem>
                <listitem>
                    <para>SAXS data from 
                        <link xlink:href="#cansas1d_documentation-case_study-collagen"
                            >dry chick collagen</link>
                        <indexterm>
                            <primary>case study</primary>
                            <secondary>SAXS of dry chick collagen</secondary>
                        </indexterm>
                        illustrates the
                        minimum information necessary to meet the requirements of the standard
                        format</para>
                </listitem>
                <listitem>
                    <para>SANS data from 
                        <link xlink:href="#cansas1d_documentation-case_study-af1410"
                            >AF1410 steel</link>:<footnote><para>
                                <link xlink:href="http://svn.smallangles.net/trac/canSAS/browser/1dwg/trunk/examples/af1410/"
                                    ><literal>http://svn.smallangles.net/trac/canSAS/browser/1dwg/trunk/examples/af1410/</literal
                                    ></link></para></footnote>
                        <indexterm>
                            <primary>case study</primary>
                            <secondary>SANS of AF1410 steel</secondary>
                        </indexterm>
                        SANS study using magnetic
                        contrast variation (with multiple samples and multiple data sets for each
                        sample), the files can be viewed from the TRAC site (no description yet).</para>
                </listitem>
                <listitem>
                    <para>
                        <literal>cansas1d-template.xml</literal>:<footnote><para>
                            <link xlink:href="http://svn.smallangles.net/trac/canSAS/browser/1dwg/trunk/cansas1d-template.xml"
                                ><literal
                                    >http://svn.smallangles.net/trac/canSAS/browser/1dwg/trunk/cansas1d-template.xml</literal
                                ></link></para></footnote>
                        <indexterm>
                            <primary>XML file</primary>
                            <secondary>cansas1d-template.xml</secondary>
                        </indexterm>
                        This is used to test all the rules in the XML
                        Schema. This is probably not a very good example to use as a starting point
                        for creating XML files with a text editor since it tests many of the
                        special-case rules.</para>
                </listitem>
            </itemizedlist>
            <section xml:id="cansas1d_documentation-examples-multiple_experiments">
                <title>XML layout for multiple experiments</title>
                <para>Each experiment is described with a single <literal>SASentry</literal> element. The
                    fragment below shows how multiple experiments
                    <indexterm>
                        <primary>multiple experiments</primary>
                    </indexterm>
                    <indexterm>
                        <primary>multiple data sets</primary>
                    </indexterm>
                    can be included in a single XML
                    file. Full examples of canSAS XML files with multiple experiments
                    include:</para>
                <itemizedlist>
                    <listitem>
                        <para> ISIS LOQ SANS instrument:<footnote><para>
                            <link xlink:href="http://svn.smallangles.net/trac/canSAS/browser/1dwg/trunk/W1W2.XML"
                                ><literal
                                    >http://svn.smallangles.net/trac/canSAS/browser/1dwg/trunk/W1W2.XML</literal
                                ></link></para></footnote>
                            <indexterm>
                                <primary>XML file</primary>
                                <secondary>W1W2.XML</secondary>
                            </indexterm>
                            multiple data sets.
                        </para>
                    </listitem>
                    <listitem>
                        <para> AF1410 steel SANS contrast variation study from NIST:<footnote><para>
                                <link xlink:href="http://svn.smallangles.net/trac/canSAS/browser/1dwg/trunk/examples/af1410/cs_af1410.xml"
                                    ><literal
                                        >http://svn.smallangles.net/trac/canSAS/browser/1dwg/trunk/examples/af1410/cs_af1410.xml</literal
                                    ></link></para></footnote>
                            <indexterm>
                                <primary>XML file</primary>
                                <secondary>cs_af1410.xml</secondary>
                            </indexterm>
                            SANS study using magnetic
                            contrast variation (with multiple samples and multiple data sets for each
                            sample), the files can be viewed from the TRAC site (no description yet).
                        </para>
                    </listitem>
                </itemizedlist>
                <para>Here is a brief sketch of how a file would be arranged with multiple SASentry
                    elements and multiple SASdata elements.
                    <indexterm>
                        <primary>XML file</primary>
                        <secondary>brief-sketch-multiple.xml</secondary>
                    </indexterm>
                    <example>
                        <title>Brief sketch of a file with multiple SASentry and SASdata blocks.</title>
                        <programlisting language="xml" linenumbering="numbered">
                            <textobject>
                                <textdata fileref="brief-sketch-multiple.xml"/>
                            </textobject>
                        </programlisting>
                    </example>
                </para>
            </section>
        </section>
        <section xml:id="cansas1d_documentation-Foreign_Elements">
            <title>Foreign Elements</title>
            <para> To allow for inclusion of elements that are not defined by the 
                <literal>cansas1d.xsd</literal> XML
                Schema, XML <emphasis role="italic">foreign elements</emphasis> 
                <indexterm>
                    <primary>XML</primary>
                    <secondary>foreign elements</secondary>
                </indexterm>
                are permitted at select locations in the
                cansas1d/1.0 format. Please refer to the section 
                <link xlink:href="#wiki-XML_Help"><emphasis>XML Help</emphasis></link>
                 for more help with XML foreign elements. </para>
            <para> 
                There is an example that demonstrates the use of a foreign 
                namespace:<footnote>
                    <para>
                        <link
                            xlink:href="http://svn.smallangles.net/trac/canSAS/browser/1dwg/data/Glassy%20Carbon/ISIS/GLASSYC_C4G8G9_withTL.xml"
                            ><literal
                                >http://svn.smallangles.net/trac/canSAS/browser/1dwg/data/Glassy%20Carbon/ISIS/GLASSYC_C4G8G9_withTL.xml</literal></link></para>
                </footnote>
                This example uses a foreign namespace to record the transmission spectra related to
                the acquisition of the SANS data at a time-of-flight facility. Look near line 153
                for the element om the next example. 
                <informalexample>
                    <programlisting>&lt;transmission_spectrum xmlns="urn:transmission:spectrum"></programlisting>
                </informalexample>
                The foreign namespace given
                (<literal>urn:transmission:spectrum</literal>) becomes the default namespace for just the
                <literal>transmission_spectrum</literal> element. </para>
            <para>Also refer to <link
                xlink:href="http://svn.smallangles.net/trac/canSAS/changeset/47">canSAS TRAC
                ticket #47</link> for an example of arranging the content in 
                <literal>SASprocessnote</literal> to avoid the use of foreign namespace
                elements. </para>
        </section>
        <section xml:id="cansas1d_documentation-Support_Tools">
            <title>Support tools for Visualization &amp; Analysis software</title>
            <para> Support for importing cansas1d/1.0 files exists for these 
                languages and environments: 
            </para>
            <itemizedlist>
                <listitem>
                    <para>
                        <emphasis role="bold">FORTRAN</emphasis>:
                        See the section titled
                        <link xlink:href="#cansas1d_documentation-binding-Fortran"
                            ><emphasis role="italic">Fortran binding</emphasis></link>.
                        <indexterm>
                            <primary>binding</primary>
                            <secondary>FORTRAN</secondary>
                        </indexterm>
                        <indexterm>
                            <primary>FORTRAN</primary>
                            <see>binding, FORTRAN</see>
                        </indexterm>
                    </para>
                </listitem>
                <listitem>
                    <para>
                        <emphasis role="bold">IgorPro</emphasis>:
                        See the section titled
                        <link xlink:href="#cansas1d_documentation-binding-IgorPro"
                            ><emphasis role="italic">IgorPro binding</emphasis></link>.
                        <indexterm>
                            <primary>binding</primary>
                            <secondary>IgorPro</secondary>
                        </indexterm>
                        <indexterm>
                            <primary>IgorPro</primary>
                            <see>binding, IgorPro</see>
                        </indexterm>
                    </para>
                </listitem>
                <listitem>
                    <para>
                        <emphasis role="bold">Java</emphasis>:
                        See the section titled
                        <link xlink:href="#cansas1d_documentation-binding-Java"
                            ><emphasis role="italic">Java JAXB binding</emphasis></link>.
                        <indexterm>
                            <primary>binding</primary>
                            <secondary>Java</secondary>
                        </indexterm>
                        <indexterm>
                            <primary>Java</primary>
                            <see>binding, Java</see>
                        </indexterm>
                    </para>
                </listitem>
                <listitem>
                    <para>
                        <emphasis role="bold">Microsoft Excel</emphasis>:
                        Support for Microsoft Excel
                        <indexterm>
                            <primary>binding</primary>
                            <secondary>Microsoft Excel</secondary>
                        </indexterm>
                        <indexterm>
                            <primary>Microsoft Excel</primary>
                            <see>binding, Microsoft Excel</see>
                        </indexterm>
                        is provided through the default canSAS stylesheet <link
                            xlink:href="http://svn.smallangles.net/svn/canSAS/1dwg/trunk/cansasxml-html.xsl"
                            >cansasxml-html.xsl</link>. 
                        The <link
                            xlink:href="http://www.isis.stfc.ac.uk/instruments/loq/loq2470.html"
                            >ISIS LOQ instrument</link> has provided an <link
                                xlink:href="http://www.isis.rl.ac.uk/archive/LargeScale/LOQ/xml/cansas_xml_format.pdf"
                                >excellent description</link><footnote><para><link
                            xlink:href="http://www.isis.stfc.ac.uk/instruments/loq/loq2470.html"
                            ><literal>http://www.isis.stfc.ac.uk/instruments/loq/loq2470.html</literal
                            ></link></para></footnote>
                        of how to import data from the
                        cansas1d/1.0 format into Excel.
                        Also note that the
                            <link
                            xlink:href="http://www.isis.rl.ac.uk/archive/LargeScale/LOQ/loq.htm">old
                            WWW site</link><footnote><para><link
                            xlink:href="http://www.isis.rl.ac.uk/LargeScale/LOQ/loq.htm"
                            ><literal>http://www.isis.rl.ac.uk/LargeScale/LOQ/loq.htm</literal
                            ></link></para></footnote>
                        may still be available. 
                    </para>
                </listitem>
                <listitem>
                    <para>
                        <emphasis role="bold">PHP</emphasis>:
                        The <link xlink:href="#cansas1d_documentation-converting_into_XML"
                            ><emphasis role="italic">canSAS/xmlWriter</emphasis></link>
                        <indexterm><primary><literal>xmlWriter</literal></primary></indexterm>
                        is implemented in <link xlink:href="http://www.php.net">PHP</link
                        ><footnote><para><link xlink:href="http://www.php.net"
                            ><literal>http://www.php.net</literal></link></para></footnote>
                        <indexterm>
                            <primary>binding</primary>
                            <secondary>PHP</secondary>
                        </indexterm>
                        <indexterm>
                            <primary>PHP</primary>
                            <see>binding, PHP</see>
                        </indexterm>
                        and writes a cansas1d/1.0 data file given three-column ASCII data as input.
                        (<link
                            xlink:href="http://svn.smallangles.net/trac/canSAS/browser/1dwg/trunk/php/xmlWriter/index.php"
                            >PHP source</link>)<footnote>
                            <para>
                                <link xlink:href="http://svn.smallangles.net/trac/canSAS/browser/1dwg/trunk/php/xmlWriter/index.php"
                                    ><literal>http://svn.smallangles.net/trac/canSAS/browser/1dwg/trunk/php/xmlWriter/index.php</literal></link>
                            </para>
                        </footnote>
                        The code uses <link xlink:href="http://www.php.net/DomDocument">DomDocument</link
                        ><footnote><para><link xlink:href="http://www.php.net/DomDocument"
                            ><literal>http://www.php.net/DomDocument</literal></link></para></footnote>
                        to build the XML file.  Look for the line beginning with
                        <literal>function prepare_cansasxml($post)</literal>.
                    </para>
                    <para>
                        Another example of <literal>DomDocument</literal>
                        is in the <literal>function surveillance($post)</literal> where
                        logging information is inserted into an XML file.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        <emphasis role="bold">Python</emphasis>:
                        See the section titled
                        <link xlink:href="#cansas1d_documentation-binding-Python"
                            ><emphasis role="italic">Python binding</emphasis></link>.
                        <indexterm>
                            <primary>binding</primary>
                            <secondary>Python</secondary>
                        </indexterm>
                        <indexterm>
                            <primary>Python</primary>
                            <see>binding, Python</see>
                        </indexterm>
                    </para>
                </listitem>
                <listitem>
                    <para>
                        <emphasis role="bold">XSLT</emphasis> (useful in a web browser)
                        is described later in the section titled 
                        <link xlink:href="#xml-stylesheet"><emphasis role="italic">Example XML Stylesheets</emphasis></link>.
                        <indexterm>
                            <primary>binding</primary>
                            <secondary>XML Stylesheet (XSLT)</secondary>
                        </indexterm>
                    </para>
                </listitem>
            </itemizedlist>
        </section>
        <section xml:id="cansas1d_documentation-repositories">
            <title>Software repositories (for cansas1d/1.0 standard)</title>
            <itemizedlist>
                <listitem>
                    <para><emphasis role="bold">TRAC</emphasis>: <link
                            xlink:href="http://svn.smallangles.net/trac/canSAS/browser/1dwg/tags/v1.0"
                            ><literal>http://svn.smallangles.net/trac/canSAS/browser/1dwg/tags/v1.0</literal></link></para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">Subversion</emphasis>: <link
                            xlink:href="http://svn.smallangles.net/svn/canSAS/1dwg/tags/v1.0"
                            ><literal>http://svn.smallangles.net/svn/canSAS/1dwg/tags/v1.0</literal></link></para>
                </listitem>
            </itemizedlist>
        </section>
    </section>
    <section xml:id="cansas1d_documentation-schema_validation">
        <title>Validation of XML against the Schema</title>
        <indexterm>
            <primary>validation</primary>
            <secondary>against XML Schema</secondary>
        </indexterm>
        <orderedlist>
            <listitem>
                <para>open browser to: 
                    <link xlink:href="http://www.xmlvalidation.com/"
                        ><literal>http://www.xmlvalidation.com/</literal></link></para>
            </listitem>
            <listitem>
                <para>paste content of candidate XML file (with reference in the header to the XML
                    Schema as shown above) into the form</para>
            </listitem>
            <listitem>
                <para>press <literal>&lt;validate></literal></para>
            </listitem>
            <listitem>
                <para>paste content of 
                    <literal>cansas1d.xsd</literal><footnote><para><link
                        xlink:href="http://svn.smallangles.net/svn/canSAS/1dwg/trunk/cansas1d.xsd"
                        ><literal>http://svn.smallangles.net/svn/canSAS/1dwg/trunk/cansas1d.xsd</literal
                    ></link></para></footnote>
                    XSD file into form and press <literal>&lt;continue validation></literal>.</para>
            </listitem>
            <listitem>
                <para>check the results</para>
            </listitem>
        </orderedlist>
    </section>
</chapter>
